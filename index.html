<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Soft Builder Ultimate</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <style id="generated-css"></style>
</head>
<body>
    <header class="top-bar">
        <div class="logo-area">
            <div class="logo-circle">
                <span class="material-symbols-rounded">dashboard_customize</span>
            </div>
            <h1>Builder</h1>
        </div>
        <div class="header-actions">
            <button class="icon-btn" id="pageManagerBtn" onclick="openPageSheet()" title="Kelola Halaman" style="color:var(--primary); background:var(--primary-light)">
                <span class="material-symbols-rounded">layers</span>
            </button>
            <div class="divider-v"></div>

            <button class="icon-btn danger-soft" id="resetBtn" title="Hapus Semua">
                <span class="material-symbols-rounded">delete_sweep</span>
            </button>
            <button class="icon-btn" id="previewBtn" onclick="togglePreview(true)" title="Mode Preview">
                <span class="material-symbols-rounded">visibility</span>
            </button>
            <button class="icon-btn" id="layerBtn" title="Layer">
                <span class="material-symbols-rounded">view_list</span>
            </button>
            <div class="divider-v"></div>
            <div class="menu-wrapper">
                <button class="icon-btn" id="menuBtn" onclick="toggleMainMenu()" title="Menu">
                    <span class="material-symbols-rounded">menu</span>
                </button>
                <div class="main-menu-dropdown" id="mainMenuDropdown">
                    <input type="file" id="importInput" accept=".json,.zip" style="display: none;">
                    <button class="menu-item" id="importBtn">
                        <span class="material-symbols-rounded">upload_file</span> Import Project
                    </button>
                    <button class="menu-item" id="globalBtn">
                        <span class="material-symbols-rounded">tune</span> Global Settings
                    </button>
                    <div class="menu-divider"></div>
                    <button class="menu-item primary-text" id="exportBtn">
                        <span class="material-symbols-rounded">folder_zip</span> Export to ZIP
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main id="editorCanvas" class="canvas">
        <div class="empty-state" id="emptyState">
            <div class="illustration"><span class="material-symbols-rounded">post_add</span></div>
            <h3>Area Desain</h3>
            <p>Klik tombol + di bawah untuk memulai</p>
        </div>
    </main>

    <div id="toast" class="toast">Project Disimpan</div>

    <div class="fab-stack">
        <button class="mini-fab" id="undoBtn" onclick="undo()" title="Undo">
            <span class="material-symbols-rounded">undo</span>
        </button>
        <button class="mini-fab" id="redoBtn" onclick="redo()" title="Redo">
            <span class="material-symbols-rounded">redo</span>
        </button>
        <div style="height: 0px;"></div> 
        <button class="fab" id="addFab">
            <span class="material-symbols-rounded">add</span>
        </button>
    </div>
    
    <button class="exit-preview-btn" id="exitPreviewBtn" onclick="togglePreview(false)">
        <span class="material-symbols-rounded">visibility_off</span> Keluar Preview
    </button>

    <div class="overlay" id="overlay"></div>

    <div class="bottom-sheet" id="pageSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 class="sheet-title">Kelola Halaman</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="sheet-body">
            <div id="pageList" class="layer-list" style="margin-bottom: 16px;">
                </div>
            <button class="inner-add-btn" onclick="addNewPagePrompt()">
                <span class="material-symbols-rounded">post_add</span> &nbsp; Tambah Halaman Baru
            </button>
        </div>
    </div>

    <div class="bottom-sheet" id="addSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 class="sheet-title">Tambah Widget</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="sheet-body">
            <div class="grid-menu">
                <button class="grid-item" data-type="grid-row">
                    <div class="icon-box"><span class="material-symbols-rounded">view_column</span></div>
                    <span>2 Columns</span>
                </button>
                <button class="grid-item" data-type="container">
                    <div class="icon-box"><span class="material-symbols-rounded">crop_free</span></div>
                    <span>Container</span>
                </button>
<button class="grid-item" data-type="icon">
    <div class="icon-box"><span class="material-symbols-rounded">sentiment_satisfied</span></div>
    <span>Icon</span>
</button>
                <button class="grid-item" data-type="card">
                    <div class="icon-box"><span class="material-symbols-rounded">call_to_action</span></div>
                    <span>Card</span>
                </button>
                <button class="grid-item" data-type="heading">
                    <div class="icon-box"><span class="material-symbols-rounded">title</span></div>
                    <span>Heading</span>
                </button>
                <button class="grid-item" data-type="paragraph">
                    <div class="icon-box"><span class="material-symbols-rounded">text_fields</span></div>
                    <span>Text</span>
                </button>
                <button class="grid-item" data-type="button">
                    <div class="icon-box"><span class="material-symbols-rounded">smart_button</span></div>
                    <span>Button</span>
                </button>
                <button class="grid-item" data-type="image">
                    <div class="icon-box"><span class="material-symbols-rounded">image</span></div>
                    <span>Image</span>
                </button>
                <button class="grid-item" data-type="theme-toggle">
                    <div class="icon-box"><span class="material-symbols-rounded">contrast</span></div>
                    <span>Dark Mode</span>
                </button>
                <button class="grid-item" data-type="divider">
                    <div class="icon-box"><span class="material-symbols-rounded">horizontal_rule</span></div>
                    <span>Divider</span>
                </button>
                <button class="grid-item" data-type="spacer">
                    <div class="icon-box"><span class="material-symbols-rounded">space_bar</span></div>
                    <span>Spacer</span>
                </button>
            </div>
        </div>
    </div>

    <div class="bottom-sheet" id="editSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 id="editTitle" class="sheet-title">Edit Properti</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="pill-tabs">
            <button class="pill-btn active" data-tab="content">Konten</button>
            <button class="pill-btn" data-tab="style">Style</button>
        </div>
        <div class="sheet-body">
            <div id="tab-content" class="tab-pane active">
                <div id="formContent" class="form-stack"></div>
            </div>
            <div id="tab-style" class="tab-pane">
                <div id="formStyle" class="form-stack"></div>
            </div>
        </div>
        <div class="sheet-footer">
            <button class="btn-save" id="saveEditBtn">Terapkan Perubahan</button>
        </div>
    </div>

    <div class="bottom-sheet" id="iconSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 class="sheet-title">Pilih Ikon</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="sheet-body">
            <div id="iconGrid" class="icon-grid"></div>
        </div>
    </div>

    <div class="bottom-sheet" id="globalSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 class="sheet-title">Global Settings</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="sheet-body">
            <div class="form-stack">
                <div class="form-group">
                    <label style="font-size:13px; font-weight:500; display:block; margin-bottom:8px">Font Family</label>
                    <select id="global-font" class="input-field">
                        <option value="'Outfit', sans-serif">Outfit (Modern)</option>
                        <option value="'Inter', sans-serif">Inter (Clean)</option>
                        <option value="serif">Serif</option>
                        <option value="monospace">Monospace</option>
                    </select>
                </div>
                <div class="form-group" style="margin-top:16px">
                    <label style="font-size:13px; font-weight:500; display:block; margin-bottom:8px">Background Page (Light Mode)</label>
                    <div class="color-picker-wrapper"><input type="color" id="global-bg" value="#f1f5f9" style="width:100%; height:40px; border:1px solid var(--border); border-radius:6px; cursor:pointer"></div>
                </div>
                
                <div class="prop-section" style="margin-top:20px; padding-top:20px; border-top:1px dashed var(--border)">
                    <div class="prop-title" style="margin-bottom:12px">Page Spacing (px)</div>
                    
                    <label style="font-size:12px; font-weight:500; display:block; margin-bottom:8px">Page Padding</label>
                    <div class="box-grid">
                        <div class="box-cell"><input type="number" id="global-pTop" placeholder="0" class="input-field"><span>Top</span></div>
                        <div class="box-cell"><input type="number" id="global-pRight" placeholder="0" class="input-field"><span>Right</span></div>
                        <div class="box-cell"><input type="number" id="global-pBottom" placeholder="0" class="input-field"><span>Btm</span></div>
                        <div class="box-cell"><input type="number" id="global-pLeft" placeholder="0" class="input-field"><span>Left</span></div>
                    </div>

                    <div style="height:16px"></div>

                    <label style="font-size:12px; font-weight:500; display:block; margin-bottom:8px">Page Margin</label>
                    <div class="box-grid">
                        <div class="box-cell"><input type="number" id="global-mTop" placeholder="0" class="input-field"><span>Top</span></div>
                        <div class="box-cell"><input type="number" id="global-mRight" placeholder="0" class="input-field"><span>Right</span></div>
                        <div class="box-cell"><input type="number" id="global-mBottom" placeholder="0" class="input-field"><span>Btm</span></div>
                        <div class="box-cell"><input type="number" id="global-mLeft" placeholder="0" class="input-field"><span>Left</span></div>
                    </div>
                </div>

            </div>
        </div>
        <div class="sheet-footer"><button class="btn-save" id="saveGlobalBtn">Simpan</button></div>
    </div>

    <div class="bottom-sheet" id="layerSheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3 class="sheet-title">Layers</h3>
            <button class="icon-btn close-sheet-btn" onclick="closeAllSheets()">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="layer-controls">
            <button class="layer-ctrl-btn" onclick="moveLayer('up')" title="Naik"><span class="material-symbols-rounded">arrow_upward</span></button>
            <button class="layer-ctrl-btn" onclick="moveLayer('down')" title="Turun"><span class="material-symbols-rounded">arrow_downward</span></button>
            <div class="divider-v" style="height:20px; background:var(--border)"></div>
            <button class="layer-ctrl-btn" onclick="moveLayer('out')" title="Keluar Parent"><span class="material-symbols-rounded">chevron_left</span></button>
            <button class="layer-ctrl-btn" onclick="moveLayer('in')" title="Masuk Container"><span class="material-symbols-rounded">chevron_right</span></button>
        </div>
        <div class="sheet-body" style="padding: 0;">
            <div id="layerList" class="layer-list"></div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/pagemanager.js"></script> <script src="js/store.js"></script>
    <script src="js/elements.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
